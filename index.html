<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://flashexpress.com/favicon.ico" type="image/x-icon">
  <title>Flash Express</title>
  <style>
    body {
      font-family: "Prompt", sans-serif;
      background-color: #fffbea;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #ffeb3b;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .title { font-weight: bold; font-size: 20px; }

    .wallet {
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      margin: 20px;
      padding: 20px;
      text-align: center;
    }
    .wallet h3 { color: purple; margin: 0 0 10px 0; }
    .amount { font-size: 36px; font-weight: bold; color: black; }
    .subtext { color: #555; font-size: 14px; margin-bottom: 10px; }

    .wallet-buttons {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }
    .wallet button {
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      font-weight: bold;
      cursor: pointer;
      background-color: #ffeb3b;
      transition: 0.2s;
    }
    .wallet button:hover { background-color: #fdd835; }

    .section { margin: 25px; }
    .section h3 { margin-bottom: 10px; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
    }
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.05);
      text-align: center;
      padding: 15px;
      transition: 0.3s;
      text-decoration: none;
      color: black;
    }
    .card:hover { transform: translateY(-5px); }
    .card img { width: 40px; height: 40px; margin-bottom: 10px; }

    .news {
      background: #fff;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .news img { width: 40px; height: 40px; }

    /* ‚úÖ Footer ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà */
    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #fff;
      border-top: 2px solid #ffeb3b;
      box-shadow: 0 -3px 8px rgba(0,0,0,0.08);
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px 0;
      z-index: 999;
    }
    footer a {
      text-align: center;
      text-decoration: none;
      color: #444;
      font-size: 13px;
      flex: 1;
      transition: 0.2s;
    }
    footer a span { display: block; margin-top: 3px; }
    footer a.active { color: #6a1b9a; font-weight: 700; }
    footer a.active::after {
      content: "";
      display: block;
      width: 40%;
      height: 3px;
      background-color: #6a1b9a;
      margin: 5px auto 0;
      border-radius: 3px;
    }
    footer a:hover { transform: translateY(-2px); color: #000; }

    @media (max-width: 600px) {
      .wallet { margin: 15px; padding: 15px; }
      .amount { font-size: 30px; }
      footer { font-size: 12px; padding: 8px 0; }
    }
  </style>
</head>
<body>

  <header>
    <div class="title">Flash Express</div>
    <div>üîî</div>
  </header>

  <div class="wallet">
    <h3>‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô Flash</h3>
    <div class="amount" id="balance">0.00</div>
    <div class="subtext" id="customerInfo">‡πÄ‡∏ö‡∏≠‡∏£‡πå: -</div>
    
  </div>

  <div class="section">
    <h3>‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤</h3>
    <div class="grid">
      <a class="card" href="send.html"><img src="009daed7-4504-4ea4-b8fd-6e7c32172f57.png"><div>‡∏™‡πà‡∏á‡∏û‡∏±‡∏™‡∏î‡∏∏</div></a>
      <a class="card" href="track.html"><img src="807d420f-bfc5-4adf-a2b0-8c323c81a328.png"><div>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏û‡∏±‡∏™‡∏î‡∏∏</div></a>
      <a class="card" href="bind.html"><img src="cb0176e4-5794-4790-b581-4169b7b1f2d8.png"><div>‡∏ú‡∏π‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div></a>
      <a class="card" href="claim.html"><img src="17c78dd9-aed8-4024-bd45-095121937a91.png"><div>‡πÄ‡∏Ñ‡∏•‡∏°</div></a>
      <a class="card" href="update.html"><img src="2d3f6070-97ac-4c0c-8608-917e801eecf2.png"><div>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div></a>
    </div>
  </div>

  <div class="section">
    <h3>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô</h3>
    <div class="news">
      <img src="8986d714-9e66-4895-a704-73e2c4dd7178.png">
      <div>
        <h4>‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏ô 10%</h4>
        <p>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏õ Flash Express ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!</p>
      </div>
    </div>
    <div class="news">
      <img src="c97ba948-d703-4629-b65b-633b947cc1f1.png">
      <div>
        <h4>‡∏™‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©</h4>
        <p>‡∏™‡πà‡∏á‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á 25 ‡∏ö‡∏≤‡∏ó</p>
      </div>
    </div>
  </div>

  <footer>
    <a href="index.html" class="active">üè†<br><span>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span></a>
    <a href="news.html">üì∞<br><span>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</span></a>
    <a href="transaction.html">üí∞<br><span>‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</span></a>
    <a href="account.html">üë§<br><span>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</span></a>
  </footer>

  <script>
    const balances = JSON.parse(localStorage.getItem("customer_balances")) || {};
    const activeCustomer = localStorage.getItem("active_customer");
    const display = document.getElementById("balance");
    const info = document.getElementById("customerInfo");
    let customerData = JSON.parse(localStorage.getItem("customer_data")) || {};

    // ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
    if (!activeCustomer) {
      window.location.href = "login-customer.html";
    } else {
      info.textContent = `‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${activeCustomer}`;
      if (!customerData[activeCustomer]) {
        customerData[activeCustomer] = {
          phone: activeCustomer,
          createdAt: new Date().toLocaleString("th-TH"),
          wallet_balance: balances[activeCustomer] || 0,
          lastTransaction: "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°"
        };
      } else {
        customerData[activeCustomer].wallet_balance = balances[activeCustomer] || 0;
      }
      localStorage.setItem("customer_data", JSON.stringify(customerData));
      updateDisplay();
    }

    function updateDisplay() {
      const balance = balances[activeCustomer] || 0;
      display.textContent = balance.toLocaleString("th-TH", { minimumFractionDigits: 2 });
    }

    function addTransaction(type, amount, status) {
      const key = `transactions_${activeCustomer}`;
      const list = JSON.parse(localStorage.getItem(key)) || [];
      const entry = { date: new Date().toLocaleString("th-TH"), type, amount, status };
      list.unshift(entry);
      localStorage.setItem(key, JSON.stringify(list));
    }

    function withdraw() {
      const btn = document.getElementById("withdrawBtn");
      btn.disabled = true;

      const amount = parseFloat(prompt("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏ô:"));
      if (!amount || isNaN(amount) || amount <= 0) {
        alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        btn.disabled = false;
        return;
      }

      const currentBalance = balances[activeCustomer] || 0;
      if (amount > currentBalance) {
        alert("‚ùå ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠");
        btn.disabled = false;
        return;
      }

      balances[activeCustomer] = currentBalance - amount;
      localStorage.setItem("customer_balances", JSON.stringify(balances));
      updateDisplay();
      addTransaction("‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô", amount, "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£");

      const notice = document.createElement("div");
      notice.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô...";
      notice.style.cssText = "position:fixed;top:60px;left:50%;transform:translateX(-50%);background:#ffeb3b;padding:10px 20px;border-radius:10px;font-weight:bold;z-index:999;";
      document.body.appendChild(notice);

      setTimeout(() => {
        balances[activeCustomer] = currentBalance;
        localStorage.setItem("customer_balances", JSON.stringify(balances));
        updateDisplay();
        addTransaction("‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô", amount, "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à - ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß");
        notice.textContent = "üö´ ‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà";
        notice.style.background = "#f44336";
        notice.style.color = "#fff";
        btn.disabled = false;
        setTimeout(() => notice.remove(), 3000);
      }, 5000);
    }

    // ‚úÖ Footer Active ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
    document.querySelectorAll("footer a").forEach(a => {
      if (a.href.includes(location.pathname.split("/").pop())) {
        a.classList.add("active");
      }
    });
  </script>
</body>
</html>
